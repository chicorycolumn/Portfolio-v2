<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="assets/css/starter.css" />
    <link rel="stylesheet" href="assets/css/global.css" />
    <link rel="stylesheet" href="assets/css/aboutMe.css" />
    <link rel="stylesheet" href="assets/css/animations.css" />
    <link rel="stylesheet" href="assets/css/aboutMeCarousel.css" />
    <title>C Matus Portfolio</title>
    <script>
      function pauseCarousel(){
        $("#aboutMeCarousel").carousel("pause")
      }

      function classAfterTimeout(selector, timeout, classToAdd, classToRemove) {
        setTimeout(() => {
          $(selector).addClass(classToAdd);
          $(selector).removeClass(classToRemove);
        }, timeout);
      }

      function moveCardsFromCarousel() {
        for (let i = 0; i <= 3; i++) {
          $("#aboutMeCardHolder").append(
            $("#aboutMeCard" + i)
              .css({
                marginLeft: "0",
                marginRight: "0",
                marginTop: "0",
              })
              .addClass("visibility-h").removeClass("verticallyCenterCarouselItems")
          );
        }
        areCardsInCarousel = false;

        showOrHideAboutMeCards();
      }

      function moveCardsToCarousel() {
        console.log("moveCardsToCarousel")
        for (let i = 1; i <= 3; i++) {
          $("#carouselItem" + i).append(
            $("#aboutMeCard" + i).css({
              opacity: "1",
              marginLeft: "auto",
              marginRight: "auto",
              marginTop: "10px",
            }).removeClass("appearAnimation visibility-h").addClass("verticallyCenterCarouselItems")
          );
        }
        console.log(111)
        $("#aboutMeCarousel").carousel({interval: isTouchscreen() ? false : 2000});

        if (areCardsInCarousel === null) {
          $(".aboutMeCard").css({
            opacity: "1",
          })
        }

        setTimeout(() => {
          if (areCardsInCarousel){
            console.log("gonna sort it")
            $(".aboutMeCard").removeClass("appearAnimation")
          }
        }, 250);

        areCardsInCarousel = true;
      }

      function moveCardsToAppropriatePlace() {
        if (!window.matchMedia("(max-width: 991px)").matches) {
          if (areCardsInCarousel) {
            moveCardsFromCarousel();
          } else {
            areCardsInCarousel = false;
          }
        } else if (
          window.matchMedia("(max-width: 991px)").matches &&
          !areCardsInCarousel
        ) {
          moveCardsToCarousel();
        }
      }

      function showOrHideAboutMeCards() {
        if (!window.matchMedia("(max-width: 991px)").matches) {
          let top_of_element = $(".aboutMeCard").offset().top;
          let bottom_of_element =
            $(".aboutMeCard").offset().top + $(".aboutMeCard").outerHeight();
          let bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();
          let top_of_screen = $(window).scrollTop();

          if (bottom_of_screen > top_of_element + 250 && !previousVisibility) {
            classAfterTimeout(
              "#aboutMeCard1",
              0,
              "appearAnimation",
              "visibility-h"
            );
            classAfterTimeout(
              "#aboutMeCard2",
              150,
              "appearAnimation",
              "visibility-h"
            );
            classAfterTimeout(
              "#aboutMeCard3",
              250,
              "appearAnimation",
              "visibility-h"
            );
          }
          if (bottom_of_screen <= top_of_element) {
            previousVisibility = false;
            $(".aboutMeCard").removeClass("appearAnimation");
            $(".aboutMeCard").addClass("visibility-h");
          }
        }
      }

      let previousVisibility = false;
      let areCardsInCarousel = null; //important

      $(function () {
        // console.log(222)
        // $("#aboutMeCarousel").carousel({interval: false});

        moveCardsToAppropriatePlace();

        $(window).on("resize", function () {
          moveCardsToAppropriatePlace();
        });

        $(window).scroll(function () {
          showOrHideAboutMeCards();
        });
      });
    </script>
  </head>

  <body>

    <div
    id="aboutMeCardHolder"
      class="container-fluid p-0 justify-content-lg-between justify-content-xl-around pt-0 d-none d-lg-flex"
    >
      <!-- //// -->
      <!-- //// -->
      <div class="card shadow z1 aboutMeCard" id="aboutMeCard1">
        <img src="../assets/images/csun-logo-2b.png" class="cardMinipic" id="cardMinipic1" />
        <div class="absoluteSpread bgCard"></div>
        <div class="absoluteSpread bgCard2"></div>
        <div class="card-body z2">
          <h4 class="card-title text-center mb-5 mt-n1">What I do</h4>
          <div class="card-text color-pd6">
            <h2 class="cardHeading">Languages</h2>
            <p class="cardText">JavaScript, Python, PHP</p>
            <h2 class="cardHeading">Back-end</h2>
            <p class="cardText">
              Node.js, Axios, Express, Knex, SQL, Socket.io, Flask
            </p>
            <h2 class="cardHeading">Front-end</h2>
            <p class="cardText">HTML, CSS, React, Angular, Bootstrap</p>
            <h2 class="cardHeading">Testing</h2>
            <p class="cardText">Chai, Sinon, Mocha, Jest</p>
            <h2 class="cardHeading">Additional experience</h2>
            <p class="cardText">Adobe Premiere Pro, Audacity</p>
          </div>
          <a href="#" class="card-link">Card link</a>
          <a href="#" class="card-link">Another link</a>
        </div>
      </div>
      <!-- //// -->
      <!-- //// -->
      <div class="card shadow z1 aboutMeCard" id="aboutMeCard2">
        <img src="../assets/images/csun-logo-2b.png" class="cardMinipic" />
        <div class="absoluteSpread bgCard"></div>
        <div class="absoluteSpread bgCard2"></div>
        <div class="card-body z2">
          <h4 class="card-title text-center mb-5 mt-n1">Who I am</h4>
          <div class="card-text color-pd6">
            <h2 class="cardHeading">Training</h2>
            <p class="cardText">Northcoders was totally rad et cetera et al</p>
            <h2 class="cardHeading">Strengths</h2>
            <p class="cardText">I'm a fast learner and so on and so forth</p>
            <h2 class="cardHeading">Work</h2>
            <p class="cardText">I've been an English teacher for bla bla</p>
          </div>
          <a href="#" class="card-link">Card link</a>
          <a href="#" class="card-link">Another link</a>
        </div>
      </div>
      <!-- //// -->
      <!-- //// -->
      <div class="card shadow z1 aboutMeCard" id="aboutMeCard3">
        <img src="../assets/images/csun-logo-2b.png" class="cardMinipic" />
        <div class="absoluteSpread bgCard"></div>
        <div class="absoluteSpread bgCard2"></div>
        <div class="card-body z2">
          <h4 class="card-title text-center mb-5 mt-n1">What I like</h4>
          <div class="card-text color-pd6">
            <h2 class="cardHeading">Languages</h2>
            <p class="cardText">English, Spanish, Polish</p>
          </div>
          <a href="#" class="card-link">Card link</a>
          <a href="#" class="card-link">Another link</a>
        </div>
      </div>
      <!-- //// -->
      <!-- //// -->
    </div>
    <!-- / -->
    <!-- / -->
    <!-- / -->
    <div class="container-fluid p-0 d-block d-lg-none" id="aboutMeCarouselHolder">
      <div
        id="aboutMeCarousel"
        class="carousel slide"
        onClick="pauseCarousel()"
      >

        <div class="carousel-inner" >
          <div class="carousel-item active" id="carouselItem1">
            <!-- <div class="carouseItemInner" id="carouselItemInner1"></div> -->
          </div>
          <div class="carousel-item" id="carouselItem2">
            <!-- <div class="carouseItemInner" id="carouselItemInner2"></div> -->
          </div>
          <div class="carousel-item" id="carouselItem3">
            <!-- <div class="carouseItemInner" id="carouselItemInner3"></div> -->
          </div>
        </div>

        <a class="carousel-control-prev carouselControl flipHorizontal d-flex justify-content-end" href="#aboutMeCarousel" data-slide="prev" onClick="pauseCarousel()">
          <img class="carouselControlIcon carouselControlIconPrev " src="../assets/images/csun-arrowR.png"></img>
        </a>
        <a class="carousel-control-next carouselControl d-flex justify-content-end" href="#aboutMeCarousel" data-slide="next" onClick="pauseCarousel()">
          <img class="carouselControlIcon carouselControlIconNext" src="../assets/images/csun-arrowR.png"></img>
        </a>

      </div>
    </div>
    <!-- / -->
    <!-- / -->
    <!-- / -->
  </body>
</html>
